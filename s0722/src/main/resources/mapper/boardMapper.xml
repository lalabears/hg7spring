<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.java.mapper.BMapper">
	<select id="selectListCount" resultType="int">
		select count(*) from board
	</select>
	<select id="selectAll" resultType="com.java.dto.Board">
		select * from (select rownum rnum, a.* from 
		(select * from board 
		<if test="category == 'all'">
		 where btitle like '%'|| #{s_word} ||'%' or bcontent like '%'|| #{s_word} ||'%'
		</if>
		<if test="category == 'title'">
		 where btitle like '%'|| #{s_word} ||'%'
		</if>
		<if test="category == 'content'">
		 where bcontent like '%'|| #{s_word} ||'%'
		</if>
		
		<![CDATA[  
		order by bgroup desc, bstep asc) a) 
		where rnum >=#{startRow} and rnum<=#{endRow}
		]]>
	</select>
	<select id="selectOne" resultType="com.java.dto.Board">
		select * from board where bno=#{bno}
	</select>
</mapper> 